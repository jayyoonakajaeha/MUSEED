graph TD

%% ----------------- [1] 시작: 랜딩 및 인증 -----------------
Start([사용자 웹사이트 방문]) --> Landing[랜딩 페이지<br/>Generate Playlists Powered by AI]

Landing --> LandingOptions{사용자 행동}
LandingOptions --> |Create Playlist| AuthCheck1{인증 여부}
LandingOptions --> |Explore Music| Trending[트렌딩 페이지]
LandingOptions --> |Sign In / Get Started| AuthFlow

AuthCheck1 --> |미인증| AuthFlow[인증 절차]
AuthCheck1 --> |인증됨| Dashboard[메인 대시보드]

AuthFlow --> AuthType{인증 방식 선택}
AuthType --> |로그인| Login[아이디/비밀번호 입력]
AuthType --> |회원가입| Signup[프로필 정보 입력<br/>이름, 아이디, 비밀번호]
Login --> AuthResult{인증 성공?}
Signup --> AuthResult
AuthResult --> |성공| Dashboard
AuthResult --> |실패| Error[오류 메시지]
Error --> AuthFlow

Trending --> |로그인 필요 기능 사용 시| AuthFlow
Dashboard --> NavBar{"네비게이션"} & Feed["피드 영역"] & Recommended["추천 / 트렌딩"]
style Start fill:#a78bfa
style Landing fill:#e9d5ff
style AuthFlow fill:#fbbf24
style Dashboard fill:#34d399


%% ----------------- [2] 대시보드 및 탐색 -----------------
NavBar -- Home --> Dashboard
NavBar -- Discover --> Discover["플레이리스트 탐색"]
NavBar -- Create --> CreatePage["플레이리스트 생성"]
NavBar -- Profile --> MyProfile["내 프로필"]

Feed -- 팔로우 사용자 활동 --> UserProfile["사용자 프로필"]
Feed -- 플레이리스트 클릭 --> PlaylistView["플레이리스트 상세"]
Recommended --> Trending
Trending -- 플레이리스트 클릭 --> PlaylistView
Trending -- 작성자 클릭 --> UserProfile

Discover --> SearchBar["검색바"] & Trending
SearchBar -- 검색어 입력 --> SearchResults["검색 결과 리스트"]
SearchResults -- 플레이리스트 클릭 --> PlaylistView
SearchResults -- 좋아요 --> LikeAction["좋아요 ❤️"]
SearchResults -- 공유 --> ShareAction["공유하기"]
LikeAction --> Discover
ShareAction --> Discover

style Discover fill:#e9d5ff
style SearchBar fill:#fde68a
style SearchResults fill:#fcd34d
style Trending fill:#c4b5fd


%% ----------------- [3] 플레이리스트 생성 -----------------
CreatePage --> Info["Select seed tracks or upload<br>AI will generate playlist"]
Info --> SeedMethod{"시드 음악 선택 방식"}
SeedMethod -- Search Library --> SearchFlow["라이브러리 검색"]
SeedMethod -- Upload Music --> UploadFlow["파일 업로드"]

SearchFlow --> SearchInput["검색어 입력"]
SearchInput --> SearchResults2["FMA 라이브러리 결과"]
SearchResults2 --> SelectTrack["트랙 선택"]
UploadFlow --> UploadArea["파일 업로드 영역"]
UploadArea --> FileSelect["파일 탐색기"]
FileSelect --> FileUpload["MP3/WAV/FLAC 업로드"]

SelectTrack --> Confirmed["시드 음악 확정"]
FileUpload --> Confirmed
Confirmed --> Generate["Generate Playlist 클릭"]
Generate --> Loading["AI 분석 중<br>Analyzing your taste..."]
Loading --> Complete["생성 완료"]
Complete --> PlaylistView

style CreatePage fill:#60a5fa
style Generate fill:#34d399
style Loading fill:#fbbf24
style PlaylistView fill:#f472b6


%% ----------------- [4] 플레이리스트 상세 -----------------
PlaylistView --> InfoView[플레이리스트 정보<br>제목, 생성자, 곡 목록, 좋아요 수]
InfoView --> OwnerCheck{소유자 확인}

OwnerCheck --> |내 플레이리스트| MyActions[내 플레이리스트 액션]
OwnerCheck --> |타인 플레이리스트| OtherActions[타인 플레이리스트 액션]

%% 내 플레이리스트
MyActions --> MyOptions{가능한 작업}
MyOptions --> |제목 수정| EditTitle
MyOptions --> |순서 변경| Reorder
MyOptions --> |삭제| Delete
MyOptions --> |공개/비공개| Privacy
MyOptions --> |재생| Play
MyOptions --> |하트| Like
MyOptions --> |공유| Share
MyOptions --> |이 곡으로 새로 만들기| NewFromTrack

EditTitle --> Updated
Reorder --> Updated
Delete --> Updated
Privacy --> Updated
Updated --> PlaylistView

%% 타인 플레이리스트
OtherActions --> OtherOptions{가능한 작업}
OtherOptions --> |저장| Save
OtherOptions --> |하트| Like
OtherOptions --> |공유| Share
OtherOptions --> |재생| Play
OtherOptions --> |작성자 클릭| CreatorProfile
OtherOptions --> |이 곡으로 새로 만들기| NewFromTrack

Save --> SaveSuccess[저장 완료]
SaveSuccess --> PlaylistView
Like --> LikeSuccess[좋아요 토글]
LikeSuccess --> PlaylistView
Share --> ShareOptions[공유 옵션]
ShareOptions --> PlaylistView

Play --> Player[음악 플레이어]
Player --> PlaylistView

CreatorProfile --> OtherProfile
NewFromTrack --> CreatePage

style MyActions fill:#60a5fa
style OtherActions fill:#a78bfa
style Player fill:#34d399


%% ----------------- [5] 프로필 -----------------
ProfileType{프로필 유형} --> |내 프로필| MyProfile
ProfileType --> |타인 프로필| OtherProfile

MyProfile --> MyInfo[프로필 정보]
MyInfo --> MyStats[통계]
MyStats --> MyTabs{탭 선택}
MyTabs --> |Created| CreatedTab[내가 만든 플레이리스트]
MyTabs --> |Liked| LikedTab[좋아요한 플레이리스트]
MyTabs --> |Genre Stats| GenreTab[장르 선호도 차트]
MyProfile --> |Edit Profile| EditProfile[프로필 수정]
EditProfile --> SaveProfile[변경 저장]
SaveProfile --> MyProfile
CreatedTab --> |플레이리스트 클릭| PlaylistView
LikedTab --> |플레이리스트 클릭| PlaylistView

OtherProfile --> OtherInfo[타인 프로필 정보]
OtherInfo --> FollowCheck{팔로우 상태}
FollowCheck --> |미팔로우| FollowBtn[팔로우]
FollowCheck --> |팔로우 중| UnfollowBtn[언팔로우]
FollowBtn --> FollowAction[팔로우 완료]
UnfollowBtn --> UnfollowAction[언팔로우 완료]
FollowAction --> OtherProfile
UnfollowAction --> OtherProfile
OtherInfo --> OtherPlaylists[공개 플레이리스트 목록]
OtherPlaylists --> |플레이리스트 클릭| PlaylistView

style MyProfile fill:#fb923c
style OtherProfile fill:#fb923c
style CreatedTab fill:#e9d5ff
style LikedTab fill:#e9d5ff
style GenreTab fill:#a78bfa
